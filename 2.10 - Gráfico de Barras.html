<canvas width="600" height="400"></canvas>

<script>
    // Seletor de tela
    var tela=document.querySelector('canvas');
    var desenho=tela.getContext('2d');

    // Ferramentas de desenho
{
    function inicio() { desenho.beginPath() }
    function ponto(x,y) { desenho.moveTo(x,y) }
    function linha(x,y) { desenho.lineTo(x,y) }
    function arco(xc,yc,r, ti, tf,texto) { desenho.arc(xc,yc,r, ti, tf,texto) }
    function pintarRet(xr,yr, w,h) { desenho.fillRect(xr,yr, w,h) }
    function contornoRet(xr,yr, w,h) { desenho.strokeRect(xr,yr, w,h) }
    function cor(x) { desenho.fillStyle=x }
    function pintar() { desenho.fill() }
    function corLinha(x) { desenho.strokeStyle=x }
    function contorno() { desenho.stroke() }
}
    function Retangulo(xr, yr, w, h, fundo, textoF, linha,textoL) {
        var tela = document.querySelector('canvas');
        var desenho = tela.getContext('2d');

        if (textoF == true && textoL == false) {
            cor(fundo);
            pintarRet(xr,yr,w,h);
        }
        if (textoF == false && textoL == true) {
            corLinha(linha);
            contornoRet(xr,yr,w,h)
        }
        if (textoF == true && textoL == true) {
            cor(fundo);
            pintarRet(xr,yr,w,h);
            corLinha(linha);
            contornoRet(xr,yr,w,h);
        }       
    }

    function Legenda(x, y, texto) {
        var tela = document.querySelector('canvas');
        var desenho = tela.getContext('2d');

        desenho.font = '15px Georgia';
        desenho.fillStyle = 'black';
        desenho.fillText(texto, x, y);    
    }

    function Barras(x, y, serie, cores, texto) {
        Legenda(x, y-10, texto);
        var vert = 0;

        for (var i = 0; i < serie.length; i++) {
            Retangulo(x,y+vert,50,serie[i],cores[i],true,'black',true);
            vert=vert+serie[i];
        }
    }

    var serie2015=[50, 25, 20, 5];
    var serie2016=[65, 20, 13, 2];
    var cores=['blue', 'green', 'yellow', 'red'];

    Barras(50, 50, serie2015, cores, '2015');
    Barras(150, 50, serie2016, cores, '2016');
</script>